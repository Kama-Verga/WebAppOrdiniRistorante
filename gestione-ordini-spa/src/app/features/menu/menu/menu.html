<section class="menu-shell">
  <header class="page-hero">
    <div class="hero-copy">
      <h1>Menu</h1>
      <p>Pick your dishes, adjust quantities, and send the order in one flow.</p>
    </div>
    <div class="hero-actions">
      <mat-chip-set>
        <mat-chip color="primary" selected>{{ selectedIds.length }} selected</mat-chip>
      </mat-chip-set>
    </div>
  </header>

  <div class="menu-layout">
    <div class="menu-column">
      <div class="menu-grid" *ngIf="menu.length > 0; else empty">
        <mat-card class="menu-card" *ngFor="let item of menu">
          <mat-card-header>
            <mat-card-title>{{ item.nome }}</mat-card-title>
            <mat-card-subtitle>{{ item.prezzo | currency:'EUR':'code':'1.2-2' }}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p class="menu-meta">Item id #{{ item.id }}</p>
          </mat-card-content>
          <mat-card-actions class="menu-card-actions">
            <button
              mat-icon-button
              type="button"
              (click)="removeItem(item.id)"
              [disabled]="qty(item.id) === 0"
              aria-label="Remove item"
            >
              <mat-icon>remove</mat-icon>
            </button>
            <mat-chip-set>
              <mat-chip>{{ qty(item.id) }}</mat-chip>
            </mat-chip-set>
            <button
              mat-icon-button
              type="button"
              (click)="addItem(item.id)"
              aria-label="Add item"
            >
              <mat-icon>add</mat-icon>
            </button>
          </mat-card-actions>
        </mat-card>
      </div>

      <ng-template #empty>
        <mat-card class="status-card empty-card">
          No items in the menu yet.
        </mat-card>
      </ng-template>
    </div>

    <aside class="order-panel">
      <mat-card class="order-card">
        <mat-card-header>
          <mat-card-title>Create order</mat-card-title>
          <mat-card-subtitle>Delivery details and summary</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="order-summary">
            <div>
              <span>Items</span>
              <strong>{{ selectedIds.length }}</strong>
            </div>
            <div>
              <span>Total</span>
              <strong>{{ orderTotal() | currency:'EUR':'code':'1.2-2' }}</strong>
            </div>
          </div>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Delivery address</mat-label>
            <input
              matInput
              [value]="address"
              (input)="address = ($any($event.target).value)"
              autocomplete="street-address"
            />
          </mat-form-field>
        </mat-card-content>
        <mat-card-actions class="order-actions">
          <button
            mat-flat-button
            color="primary"
            type="button"
            (click)="submitOrder()"
            [disabled]="selectedIds.length === 0"
          >
            Send order
          </button>
          <a mat-stroked-button routerLink="/orders">View orders</a>
        </mat-card-actions>
      </mat-card>

      @if (message) {
        <mat-card class="status-card message-card">
          {{ message }}
        </mat-card>
      }
    </aside>
  </div>
</section>
